name: DevLake Multi-Stage Build

on:
  push:
    branches: [ main ]

jobs:
  build:
    name: CI Build Job with 3 Stages
    runs-on: ubuntu-latest

    steps:
      ### STAGE 1: Setup
      - name: 🔧 Stage 1 - Checkout and Setup
        uses: actions/checkout@v3

      - name: Install dependencies
        run: |
          echo "Installing dependencies..."
          sleep 5  # simulate setup

      ### STAGE 2: Build
      - name: 🏗️ Stage 2 - Build Project
        run: |
          echo "Compiling code..."
          sleep 7  # simulate build

      ### STAGE 3: Test
      - name: 🧪 Stage 3 - Run Unit Tests
        run: |
          echo "Running unit tests..."
          sleep 6  # simulate tests
